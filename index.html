         <!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>小琴robot</title>
	<link rel="stylesheet" href="./index.css">
</head>
<body>
	<div class="wrapper">
		 
		<p class="name">小琴robot</p>
		<div class="content-box">
			  <div class="robot">
                <div class="avitor"></div>
                <div class="text">想我了吗(●'◡'●)</div>
            </div>
		</div>
		<div class="input-box">
			<input type="text" name="" id="inp" placeholder="你想说点啥~">
			<button type="" id="submit">发送</button>
		</div>
	</div>
 
 问:<input type="text" id="robot" onkeypress="showHint(this.value)"/> 

<input type="button" value="发送" onclick="Send(document.getElementById('robot').value)"/> 当键盘敲击回车时发送

 

<p>答: <span id="txtHint"></span></p>

<script>

var xmlHttp

function showHint(str)

{

            if (event.keyCode==13)

                   {

                            Send(str);

                   } 

}

function Send(str)

{

 if (str.length==0)

    {

    document.getElementById("txtHint").innerHTML="";

    return;

    }

          xmlHttp=GetXmlHttpObject()

                     if (xmlHttp==null)

                            {

                            alert ("您的浏览器不支持AJAX！");

                            return;

                            }

                     var url="http://www.tuling123.com/openapi/api?key=2bb7948c6bd04a608de3c318306c4541&info=你好";

                     url=url+"&info="+str;

                     url=url+"&userid=1234" ;

                     xmlHttp.onreadystatechange=stateChanged;

                     xmlHttp.open("GET",url,true);

                     xmlHttp.send(null);

                      document.getElementById("robot").value="";

}

function stateChanged()

{

if (xmlHttp.readyState==4)

{

var msg=eval('(' + xmlHttp.responseText + ')'); 

 

document.getElementById("txtHint").innerHTML=msg.text;

}

}

function GetXmlHttpObject()

{

  var xmlHttp=null;

  try

    {

    // Firefox, Opera 8.0+, Safari

    xmlHttp=new XMLHttpRequest();

    }

  catch(e)

    {

    // Internet Explorer

    try

      {

      xmlHttp=new ActiveXObject("Msxml2.XMLHTTP");

      }

    catch (e)

      {

      xmlHttp=new ActiveXObject("Microsoft.XMLHTTP");

      }

    }

return xmlHttp;

}

</script>
 
 
 
 
 
 
 
 
	<script src="./ajax.js"></script>
    
</body>
</html>

